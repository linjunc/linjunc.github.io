<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面对前端鉴权登录，你需要知道的一切。从 Cookie 到 JWT、从 Session 到 SSO | 小丞前端日记</title>
    <meta name="description" content="小丞同学的博客，致力于分享高质量的 React,JS 相关博文">
    <link rel="preload stylesheet" href="/assets/style.3e522c3c.css" as="style">
    <script type="module" src="/assets/app.1e0a1878.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.3d11d069.js">
  <link rel="modulepreload" href="/assets/chunks/theme.0e008198.js">
  <link rel="modulepreload" href="/assets/pages_summary_login.md.6071e493.lean.js">
  <link rel="icon" href="/avatar.jpg">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css">
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b8b11faa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b8b11faa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-7683ced7><div class="container" data-v-7683ced7><div class="title" data-v-7683ced7><div class="VPNavBarTitle has-sidebar" data-v-7683ced7 data-v-4d981103><a class="title" href="/" data-v-4d981103><!--[--><!--]--><!--[--><img class="VPImage logo" src="/avatar.jpg" alt data-v-6db2186b><!--]--><!--[-->小丞前端日记<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-7683ced7><div class="curtain" data-v-7683ced7></div><div class="content-body" data-v-7683ced7><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-7683ced7><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-7683ced7 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->首页<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 各类知识点 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/summary/ts.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->前端总结<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/tschallenge/easy.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->TS 类型挑战<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/network/overview.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->计算机网络<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/structure/start.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->数据结构和算法<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/css/layout/flex.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->CSS 布局方式<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 前端面试合集 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/interview/heading/best1.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->面试题精选<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/interview/all/html.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->面试题合集<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/handwriting/handwriting.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->手写系列<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/algorithm/algorithm.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->算法合集<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> React 全家桶 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/react/primary/jsx.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->React 入门<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/react/hard/fiberidea.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->React 源码解析<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/react/reactinterview/common.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->React 面试题合集<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 关于我 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/pages/about/about.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->关于我<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="https://github.com/linjunc" target="_blank" rel="noreferrer" data-v-2f2cfafc data-v-8f4dc553><!--[-->GitHub<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="https://juejin.cn/user/1460594842018446" target="_blank" rel="noreferrer" data-v-2f2cfafc data-v-8f4dc553><!--[-->掘金<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="https://blog.csdn.net/m0_50855872" target="_blank" rel="noreferrer" data-v-2f2cfafc data-v-8f4dc553><!--[-->CSDN<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-7683ced7 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-7683ced7 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink" href="https://github.com/linjunc/linjunc.github.io" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-7683ced7 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink" href="https://github.com/linjunc/linjunc.github.io" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-7683ced7 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-9074c407><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-9074c407><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-9074c407><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-9074c407>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9074c407 data-v-687955bc><button data-v-687955bc>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-b2cf3e0b data-v-af16598e><div class="curtain" data-v-af16598e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af16598e><span class="visually-hidden" id="sidebar-aria-label" data-v-af16598e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 has-active" data-v-af16598e data-v-c4656e6d><div class="item" role="button" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><h2 class="text" data-v-c4656e6d>前端总结</h2><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/login.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>面对前端鉴权登录，你需要知道的一切。从 Cookie 到 JWT、从 Session 到 SSO</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/webpack_rollup.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Webpack 和 Rollup：您应该知道的一些事情</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/monorepo.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>为什么越来越多的项目选择 Monorepo?</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/jsx2js.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>我们编写的 JSX 是如何通过构建工具转换成 JS 的</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/engine.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>我是这样搭建 React + TypeScript 项目的</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/ts.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>TS 类型体操还能这么玩，太秀了！</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/event.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Event 对象，这些你都知道吗？</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/qrcode.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>如何优雅的在 H5 网页中实现扫码功能</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/animate.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>为什么 CSS 动画比 JavaScript 高效？</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/git.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>通俗易懂的GIT入门</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/prototype.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>三张图轻松KO⚡ JS 原型和原型链</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/v8.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>你知道 V8 是如何执行JS代码的吗？</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/weakmap.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>浅析 Map 和 WeakMap 区别以及使用场景</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/jsrun.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>新生代总结 JavaScript 运行机制解析</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/inherit.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>JS 继承的7种方法，你学会了吗？</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/arrayapi.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>原生 JavaScript 手写数组 API</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/iterator.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>【深扒】JavaScript 中的迭代器</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/generator.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>【深扒】JavaScript 中的生成器</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/highf.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>JavaScript中的高阶函数</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/npm.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>经常使用npm命令，你真的知道它的意思吗？</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/pages/summary/storage.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Javascript客户端存储技术你知道多少？</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-9a431c33><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _pages_summary_login" data-v-c4b0d3cf><div><h1 id="面对前端鉴权登录-你需要知道的一切。从-cookie-到-jwt、从-session-到-sso" tabindex="-1">面对前端鉴权登录，你需要知道的一切。从 Cookie 到 JWT、从 Session 到 SSO <a class="header-anchor" href="#面对前端鉴权登录-你需要知道的一切。从-cookie-到-jwt、从-session-到-sso" aria-label="Permalink to &quot;面对前端鉴权登录，你需要知道的一切。从 Cookie 到 JWT、从 Session 到 SSO&quot;">​</a></h1><p>在 Web 应用中，用户身份认证和授权是非常重要的一部分。为了确保应用程序的安全性和可靠性，前端鉴权登录技术成为了一个不可或缺的话题。同时在面试当中前端鉴权登录也会经常被提到相关的问题：</p><ul><li>你的登录是如何实现的？</li><li>登录状态是如何维持的？</li><li>如何实现退出登录？</li><li>...</li></ul><p>这篇文章将通过介绍 <code>Cookie</code>、<code>Session</code>、<code>JWT</code>、<code>SSO</code>、<code>oAuth</code> 等技术，来帮助你理解前端鉴权登录的实现原理、它们的优缺点以及它们的适用场景，以便于你在实战中能够更好的选择合适的技术来实现前端鉴权登录，同时能在面试中娓娓道来。</p><p>首先，我们需要知道为什么会有这些技术的出现，它们是为了解决什么问题的呢？</p><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><blockquote><p>写完文章回来补个前言</p></blockquote><p>文章的内容很多，从 HTTP 开始到 SSO 单点登录都有涉及，介绍了每种方式的登录流程，都会存在哪些问题。</p><p>如果是初学者，可以一点点看下去，如果你只想看某部分，可以直接跳转到对应的章节</p><p><strong>如果有什么疑问，或者文章有什么疏漏，错误的地方，欢迎在评论区指出</strong></p><h2 id="http-是无状态的" tabindex="-1">HTTP 是无状态的 <a class="header-anchor" href="#http-是无状态的" aria-label="Permalink to &quot;HTTP 是无状态的&quot;">​</a></h2><p>我们都知道 HTTP 是无状态的，在每次服务端接收到客户端的请求时，都会是个全新的请求，服务器并不知道这个请求<strong>是谁发起的，也不知道这个请求是不是第一次发起的，也不知道这个请求是不是最后一次发起的</strong>。这就意味着，每次请求都是独立的，服务器不会记录任何请求的信息，也不会记录任何客户端的信息。</p><p>举个具体的场景来说：</p><blockquote><p>我们在访问一些电商网站时，我们会<strong>挑选商品到购物车，然后结账</strong>。如果我们在结账时，服务器不知道我们是谁，那么我们就需要在结账时，<strong>再次输入我们的用户名和密码</strong>，这样服务器才能知道我们是谁，才能完成结账的操作。</p></blockquote><p>这样的操作显然是不合理的，我们在结账时，服务器应该知道我们是谁，而不是再次输入用户名和密码。</p><p>这种不合理的方式的出现也源于 <strong>HTTP 是无状态的，服务器无法记住用户的信息。</strong></p><p>那么，如果 HTTP 有了状态，那么服务端就可以记住用户信息，<strong>为什么不将 HTTP 设计成有状态的呢？</strong></p><h3 id="为什么-http-不设计成有状态的呢-而是无状态的呢" tabindex="-1">为什么 HTTP 不设计成有状态的呢，而是无状态的呢？ <a class="header-anchor" href="#为什么-http-不设计成有状态的呢-而是无状态的呢" aria-label="Permalink to &quot;为什么 HTTP 不设计成有状态的呢，而是无状态的呢？&quot;">​</a></h3><p>在设计之处的考虑，一方面是为了<strong>提高协议的可扩展性和灵活性</strong>，确保它可以适用于各种不同的应用场景。另一方面是为了减轻服务器的负担，使其更加轻量级。因此选择了无状态的设计。</p><p>如果 HTTP 直接是有状态的，那么服务端需要跟踪每个客户端的状态信息，这样会使得服务器的<strong>负担变大</strong>，而且也会使得服务器的可扩展性变差。</p><p>而如果是无状态的，服务器只专注于处理一个单独的请求，不需要跟踪状态信息。同时这也<strong>促使了客户端和服务器解耦</strong>，每个请求都是独立的，不依赖服务器，更加灵活和动态。</p><p>那么，在 HTTP 无状态的情况下，我们如何实现状态的维持呢？</p><h3 id="认证标记" tabindex="-1">认证标记 <a class="header-anchor" href="#认证标记" aria-label="Permalink to &quot;认证标记&quot;">​</a></h3><p>接着上面电商的例子来说，我们可以使用认证标记来维持状态</p><p>我们在登录这个电商网站的时候，给你发个<strong>通行证</strong>，这样你可以拿着<strong>通行证</strong>，在这个网站里到处逛。</p><blockquote><p>就像在公司里，你会拿着公司的门禁卡， 门禁卡上有你的信息，这样你就可以在公司里到处走动。</p></blockquote><p>你在这个网站里逛了一圈，然后你想结账，你就拿着你的<strong>通行证</strong>去结账，这样在你结账的时候，就可以<strong>出示你的通行证</strong>，这样就可以知道你是谁了，就可以完成结账的操作。</p><p>因此，诞生了这一系列的设计，从网景公司发明的 Cookie，到后来 <code>Session</code>、<code>LocalStorage</code>、<code>IndexDB</code> 等技术，都为客户端处理状态信息提供了很多的解决方案。</p><h2 id="根基-cookie" tabindex="-1">根基 Cookie <a class="header-anchor" href="#根基-cookie" aria-label="Permalink to &quot;根基 Cookie&quot;">​</a></h2><p>Cookie 是一种存储方式，它是为了解决 HTTP 无状态导致无法跟踪用户信息而出现的。</p><p>它的出现，使得我们可以在客户端存储一些信息，然后在后续的请求中，<strong>自动带上这些信息，这样就可以实现状态的维持。</strong></p><p>相比于 <code>LocalStorage</code>、<code>SessionStorage</code> 等方式，Cookie 借助浏览器的能力，可以实现跨域存储，同时可以做到前端无感知，HTTP 请求自动带上 Cookie。</p><h3 id="cookie-实现状态维持的流程是怎么样的呢" tabindex="-1">Cookie 实现状态维持的流程是怎么样的呢？ <a class="header-anchor" href="#cookie-实现状态维持的流程是怎么样的呢" aria-label="Permalink to &quot;Cookie 实现状态维持的流程是怎么样的呢？&quot;">​</a></h3><ol><li>首先客户端向服务端发送请求时，服务端在 HTTP 响应头中添加一个 <code>Set-Cookie</code> 字段，这个字段的值就是 Cookie 的值。包含了<strong>唯一的会话标识</strong>，客户端浏览器会把它存到本地。</li><li>当客户端再次向服务端发送请求时，都会自动带上这个 Cookie，服务端就可以通过这个 Cookie 来<strong>识别客户端的身份</strong>。</li></ol><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326012705.png" alt="" data-fancybox="gallery"></p><blockquote><p>服务端返回的 set-cookie 字段</p></blockquote><p>Cookie 还有一些常用的配置项，比如 <code>domain</code>、<code>path</code>、<code>expires</code>、<code>httpOnly</code> 等，这些配置项可以用来控制 Cookie 的作用域，以及 Cookie 的有效期。</p><ul><li><code>domain</code>：指定 Cookie 的<strong>作用域</strong>，如果不指定，默认是当前域名。如果指定了，那么 Cookie 只能在指定的域名下使用。</li><li><code>expires</code>：指定 Cookie 的<strong>过期时间</strong>，如果不指定，默认是会话结束时过期。</li><li><code>httpOnly</code>: 指定该 Cookie 是否只能通过 HTTP 协议来访问，如果设置了这个属性，那么通过 JS 脚本是无法访问这个 Cookie 的。</li><li>...</li></ul><h3 id="cookie-的-secure-和-httponly-标记" tabindex="-1">Cookie 的 Secure 和 HttpOnly 标记 <a class="header-anchor" href="#cookie-的-secure-和-httponly-标记" aria-label="Permalink to &quot;Cookie 的 Secure 和 HttpOnly 标记&quot;">​</a></h3><p>这里需要特别说到 <code>httpOnly</code> 和 <code>secure</code> 属性，因为它是 Cookie 的非常重要的属性。</p><blockquote><p>安全的 Cookie 需要经过 HTTPS 协议通过加密的方式发送到服务器。即使是安全的，也不应该将敏感信息存储在cookie 中，因为它们本质上是不安全的，并且此标志不能提供真正的保护。</p></blockquote><p>对于前端而言，我们可以<strong>自己创建 Cookie，也可以修改 Cookie</strong></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cookie </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxxx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">// 伪代码</span></span></code></pre></div><p>当然这些操作只对 <code>httpOnly</code> 为 false 的 Cookie 有效，如果是 <code>httpOnly</code> 为 true 的 Cookie，那么就无法通过 JS 来操作了。</p><p>因此，我们可以通过设置 <code>httpOnly</code> 为 true 来防止 XSS 攻击。</p><p>此外 Secure 也需要特别提一下，它是用来指定 Cookie 是否只能通过 HTTPS 协议来传输，如果设置了这个属性，那么通过 HTTP 协议是无法传输这个 Cookie 的。</p><p>它为网站提供了一定的安全性！</p><p>但不管如何，Cookie 还是通过明文传输的，还是会有一定的安全隐患。</p><h3 id="cookie-的安全问题" tabindex="-1">Cookie 的安全问题 <a class="header-anchor" href="#cookie-的安全问题" aria-label="Permalink to &quot;Cookie 的安全问题&quot;">​</a></h3><p>主要有两个方面的问题：</p><ol><li>Cookie 劫持</li><li>XSS 攻击</li></ol><h4 id="cookie-劫持" tabindex="-1">Cookie 劫持 <a class="header-anchor" href="#cookie-劫持" aria-label="Permalink to &quot;Cookie 劫持&quot;">​</a></h4><p>通过<strong>中间人攻击，拦截用户的 Cookie</strong>，然后再次发送给服务端，这样就可以伪装成用户，从而获取用户的信息。</p><p>我们可以通过</p><ul><li>升级为 HTTPS 协议加密传输数据，可以有效的防止中间人攻击和黑客窃听。</li><li>同时可以限制 Cookie 的过期时间，缩短 Cookie 有效时间，来减少 Cookie 劫持的风险。</li><li>还可以设置 <code>HttpOnly</code> 和 Secure 属性，限制 Cookie 只能在 HTTPS 协议下传输，避免被 XSS 攻击窃取。</li></ul><h4 id="xss-攻击" tabindex="-1">XSS 攻击 <a class="header-anchor" href="#xss-攻击" aria-label="Permalink to &quot;XSS 攻击&quot;">​</a></h4><p>在前面也有提到，客户端可以直接操作 Cookie，那么就会有被 XSS 攻击的风险，攻击者将恶意脚本注入到网页中，从而获取 Cookie 信息。</p><p>我们可以通过以下这些方式来预防 XSS 攻击：</p><ul><li>对用户输入数据进行<strong>过滤和验证</strong>，确保所有输入的数据都符合预期。</li><li>使用 <strong>CSP</strong> 来限制脚本执行的域，防止XSS攻击。</li><li>设置 <code>httpOnly</code> 为 true</li></ul><h3 id="cookie-登录验证流程" tabindex="-1">Cookie 登录验证流程 <a class="header-anchor" href="#cookie-登录验证流程" aria-label="Permalink to &quot;Cookie 登录验证流程&quot;">​</a></h3><p>在我们首次登录这个网站时，服务端会在 HTTP 响应头中添加 <code>Set-Cookie</code> 字段，携带 cookie 的值，cookie 的值是在服务器生成的，主要是 cookie 关联的域名、过期时间、安全连接、用户数据等内容。</p><p>在下次请求时，浏览器会<strong>自动</strong>带上这个 Cookie，服务端就可以通过这个 Cookie 来识别客户端的身份，进行鉴权。</p><p><strong>Cookie 作为维持 HTTP 请求状态的根基</strong>，大多数前端鉴权问题都是依靠 Cookie 解决的，比如下面提到的 Session 方式</p><h2 id="服务端-session" tabindex="-1">服务端 Session <a class="header-anchor" href="#服务端-session" aria-label="Permalink to &quot;服务端 Session&quot;">​</a></h2><p>Session 也是 Web 应用程序中常用的会话跟踪机制。它是一种<strong>在服务器端存储用户状态信息的机制</strong>，通常用于存储用户的身份认证信息、会话标识符等敏感数据。</p><p>它与 Cookie 不同，Session 会将用户的数据存储在服务端，并且会更具加密算法确保它的安全性。</p><h3 id="session-登录流程" tabindex="-1">Session 登录流程 <a class="header-anchor" href="#session-登录流程" aria-label="Permalink to &quot;Session 登录流程&quot;">​</a></h3><p>Session 的实现方式是当客户端第一次向服务器发送请求时，服务器会为该客户端<strong>创建一个唯一的 SessionID</strong>，并在自己的内存中存储 Session 数据，Session ID 则通过响应头部中的 <code>Set-Cookie</code> 字段返回给客户端浏览器。客户端再次向服务器发送请求时，会携带该 Session ID，服务端根据 Session ID 获取对应的 Session 数据以判断用户的会话状态。</p><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326020507.png" alt="" data-fancybox="gallery"></p><blockquote><p>上图是在掘金上看到的，很清晰</p></blockquote><ol><li>首先客户端登录网站，发送账号密码给服务端。服务端校验密码是否成功</li><li>生成一个 SessionId，把登录状态存到服务端的 session 中</li><li>通过 <code>Set-Cookie</code> 把 SessionId 写入到 Cookie 中，返回给客户端</li><li>此后浏览器再请求，都会自动带上 cookie</li><li>服务端会根据 cookie 中的 SessionId 找到对应的 session，从而判断用户是否登录</li><li>成功后，返回数据给客户端</li></ol><blockquote><p>可以把 session 理解为一个 Map，是键值对的形式，key 是 sessionId，value 的内容可以是用户信息，登录状态都可以</p></blockquote><h3 id="那么-session-如何实现退出登录呢" tabindex="-1">那么 Session 如何实现退出登录呢？ <a class="header-anchor" href="#那么-session-如何实现退出登录呢" aria-label="Permalink to &quot;那么 Session 如何实现退出登录呢？&quot;">​</a></h3><p>Cookie 那块没有讲退出登录的部分，这两个是一样的。</p><p>首先，退出登录无非就是<strong>将登录状态置为未登录</strong>，那么我们就需要清除掉 Session 中的登录状态，同时也需要清除掉 Cookie 中的 SessionId。</p><p><strong>那么如何清除 Cookie 中的 SessionId 呢？</strong></p><p>我们可以通过将 Cookie 的过期时间设置为<strong>一个过去的时间</strong>来实现。</p><h3 id="采用-cookie-服务端-session-会存在哪些安全问题呢" tabindex="-1">采用 cookie + 服务端 session 会存在哪些安全问题呢？ <a class="header-anchor" href="#采用-cookie-服务端-session-会存在哪些安全问题呢" aria-label="Permalink to &quot;采用 cookie + 服务端 session 会存在哪些安全问题呢？&quot;">​</a></h3><p>首先，<strong>cookie 本身是不安全的</strong>，因为它是明文传输的，所以很容易被窃取。因此攻击者可以通过获取用户的 SessionId 来伪造用户的身份，进行恶意操作。</p><p><strong>可以通过以下的方式预防</strong></p><ul><li>使用 <strong>HTTPS</strong> 协议加密传输数据，可以有效防止中间人攻击和黑客窃听。</li><li>生成<strong>随机且复杂</strong>的 Session ID，并设置合理的过期时间，避免被猜测或者重放攻击。</li><li>不要在 <strong>URL</strong> 中使用 Session ID，避免会话固定攻击。</li><li><strong>定期更换</strong> Session ID，以保证会话安全性。</li></ul><p>还有一种安全问题是攻击者使用已知的 Session ID 信息，直接访问用户的会话，从而获取用户的敏感信息。</p><p><strong>可以通过以下的方式预防</strong></p><ul><li>在会话开始时生成新的 Session ID，避免使用容易被猜测的 Session ID，例如递增的数字序列等。</li><li>使用 <code>HttpOnly</code> 和 <code>Secure</code> 属性限制 Cookie 只能在 HTTPS 协议下使用，防止被 XSS 攻击窃取。</li></ul><p>前面我们说了很多关于服务端 Session 的东西，它需要结合 Cookie 一起使用，那么如果客户端不支持 cookie 呢？这时候怎么办？</p><h3 id="url-重写-session" tabindex="-1">URL 重写 Session <a class="header-anchor" href="#url-重写-session" aria-label="Permalink to &quot;URL 重写 Session&quot;">​</a></h3><p>URL 重写 Session 是一种<strong>在 URL 中传递 Session ID 的方式</strong>，不需要在客户端和服务端之间保存 Session 数据，而是通过在 URL 中添加 Session ID 来实现会话跟踪。</p><p>例如，在会话 ID为 ljc 的应用程序中，可以使用以下URL：</p><p><code>http://linjunc.com/index.html?SESSIONID=ljc</code></p><p>然后服务端通过检查 URL 的参数来识别会话，和存在 Cookie 的方式一样，对于前端而言就是 SessionId 存在哪里的问题。</p><p>但是这个方案也只是一个无奈的选择，因为它<strong>不安全</strong>，因为 URL 是明文传输的，所以很容易被窃取，攻击者可以通过获取用户的 SessionId 来伪造用户的身份，进行恶意操作。同时在部署和维护上也会带来一些麻烦。</p><p>服务端 Session 的方式相较于 Cookie 而言，安全性更高一些，但是会有两个问题：</p><ol><li>首先服务端需要存储 Session，这样就会占用一定的内存，而且 Session 也是有过期时间的，所以需要定期清理过期的 Session，这样就会带来一些性能问题。</li><li>不同的服务器，无法共享 Session，通常需要借助 Redis （内存型数据库）解决</li></ol><h2 id="jwt-token" tabindex="-1">JWT Token <a class="header-anchor" href="#jwt-token" aria-label="Permalink to &quot;JWT Token&quot;">​</a></h2><p>前面我们说了 Cookie 和 Session 两种方案，存在着这些问题</p><ol><li>服务端 Session 需要在服务端维护，需要找地方保存它，又要考虑分布式的问题，甚至要单独为了它启用一套 Redis 集群。</li><li>都基于浏览器 Cookie 实现，用户禁用 Cookie 后，系统就无法正常使用了。</li></ol><p><strong>我们来回想一下，前面的方案是如何出现的，为了解决什么问题而出现的呢？</strong></p><p>首先为了让服务端知道用户的登录状态，我们在<strong>客户端存储了 Cookie</strong>，然后服务端判断 Cookie 内容，来判断用户是否登录。但是这样需要将用户数据存放用 Cookie 中，这样就会<strong>存在安全问题</strong>，所以我们就想到了<strong>服务端 Session</strong>，它不需要将用户数据存放在 Cookie 中，而是存放在服务端，这样就可以避免了<strong>一定的</strong>安全问题。</p><p>现在我们又觉得 Cookie 存 sessionId 的方式不太好，同时服务端需要维护 Session，也有很大的开销。</p><p>那么有什么办法可以解决这些问题呢？</p><blockquote><p>我们想想生活的场景，我们去景区的时候，带上学生证可以打 5 折，景区为了确定我们的身份，就会看我们学生证的有效期，还有照片对不对的上，这样就确定了我们的身份了。</p></blockquote><p>那么在登录的这个场景上，我们是不是可以约定一个证件，它包含了一些用户的信息，服务端在看到这个证件的时候，就可以确定用户的身份了。</p><p>JWT 就是这样一种方案，它是一种<strong>基于 Token 的身份认证机制</strong>，它的特点是<strong>无状态</strong>，也就是说，它不需要在服务端保存会话信息，也不需要在客户端保存会话状态。</p><p>这样我们在客户端上存放的就不是 sessionId 或者是用户数据了，而是 token 字符串。</p><p><strong>从广义上来说</strong>，JWT 就是一个标准，它定义了一种<strong>在客户端和服务端之间传递的数据格式</strong>，这个数据格式可以包含用户的信息，也可以包含用户的权限信息。</p><p><strong>从狭义上来说</strong>，JWT 就是一个令牌，也就是我们在传递的 token 字符串。</p><p>我们先来介绍一下 JWT 的会话流程</p><h3 id="jwt-会话流程" tabindex="-1">JWT 会话流程 <a class="header-anchor" href="#jwt-会话流程" aria-label="Permalink to &quot;JWT 会话流程&quot;">​</a></h3><p>下面我们来看一下 JWT 的会话流程，token 是如何在客户端和服务端之间传递的。</p><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326115844.png" alt="" data-fancybox="gallery"></p><ol><li>首先用户通过账号和密码向服务器请求登录。</li><li>服务端校验用户身份后，生成一个 Token，然后将 Token 返回给客户端。</li><li>客户端需要在本地保存这个 Token，以便后续的请求携带 Token。</li><li>客户端可以在本地存储或 <code>sessionStorage</code> 中保存 Token，也可以在 Cookie 中保存 Token。</li><li>客户端在后续请求中，都需要将 Token 发送给服务器验证。一般将 Token 放在 HTTP 请求头的 <code>Authorization</code> 字段中，发送给服务器。<code>Bearer [Token]</code></li><li>服务端在接收到请求后，会从 <code>Authorization</code> 字段中获取 Token，并验证 token 是否有效，签名是否正确，是否过期等。通过后，再进行响应。</li></ol><h3 id="jwt-的生成规则" tabindex="-1">JWT 的生成规则 <a class="header-anchor" href="#jwt-的生成规则" aria-label="Permalink to &quot;JWT 的生成规则&quot;">​</a></h3><p>知道了 JWT 的会话流程，我们来看一下 JWT 的生成规则。它是如何保证安全性的呢？</p><p>JWT 由三部分构成：header（头部）、payload（载荷）和 signature（签名）。每个部分用 <code>.</code> 做分隔</p><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326132841.png" alt="" data-fancybox="gallery"></p><p>它们各个部分都是如何生成的呢？</p><h4 id="header" tabindex="-1">Header <a class="header-anchor" href="#header" aria-label="Permalink to &quot;Header&quot;">​</a></h4><p>首先是 JWT 的头部 header，它是一个 JSON 对象，包含两个属性：<code>alg</code> 和 <code>typ</code></p><ul><li><code>alg</code> 属性指定了用于生成签名的算法，例如 HMAC SHA256 或 RSA。</li><li><code>typ</code> 属性用于表示令牌类型，通常为 “JWT”。</li></ul><p>例如</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">alg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">HS256</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">typ</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">JWT</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>然后将这个 JSON 对象进行 <strong>Base64 编码</strong>，得到的字符串就是 JWT 的头部 header。</p><h4 id="payload" tabindex="-1">payload <a class="header-anchor" href="#payload" aria-label="Permalink to &quot;payload&quot;">​</a></h4><p>JWT 载荷是包含实际信息的部分，通常是一个 JSON 对象</p><p>payload 可以包含任意数量的声明，声明是一个键值对，用于描述有效载荷中所包含的信息。</p><p>声明分为三类：<strong>注册声明、公共声明和私有声明。</strong></p><p><strong>注册声明是指预先定义的声明，它们不是强制的，但是建议使用，以避免冲突。</strong></p><ul><li><code>iss (issuer)</code>：签发人</li><li><code>exp (expiration time)</code>：过期时间</li><li><code>sub (subject)</code>：主题</li><li><code>aud (audience)</code>：受众</li><li><code>nbf (Not Before)</code>：生效时间</li><li><code>iat (Issued At)</code>：签发时间</li><li><code>jti (JWT ID)</code>：编号</li></ul><p>公共的声明，可以添加任何的信息，一般添加用户的相关信息或其他业务需要的必要信息，但<strong>不建议添加敏感信息，因为该部分在客户端可解密。</strong></p><p>私有声明：用于在双方之间传递的自定义声明，不建议在公共场合使用。</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">sub</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0771</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Linjunc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">iat</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">151223</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">userId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sfhsjkfhskj</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>然后同样的会将 payload JSON 对象进行 <strong>Base64 编码</strong>，得到的字符串就是 JWT 的载荷 payload。</p><p>需要特别注意的是：！！！</p><p><strong>payload 部分默认是不进行加密的，因此不要将隐私信息直接存放再 payload 中！！！！！它仅仅只是 JSON 转成了 base64 的形式。</strong></p><p><strong>JWT 的 token 相当于是明文存储的，是可以被解密的，所以不要将敏感信息放在 payload 中。</strong></p><h4 id="signature" tabindex="-1">signature <a class="header-anchor" href="#signature" aria-label="Permalink to &quot;signature&quot;">​</a></h4><p>最后是 JWT 的签名 signature 部分，它由三部分结合算法生成：</p><ol><li>base64 后的 header</li><li>base64 后的 payload</li><li>secret 私钥</li></ol><p>首先创建签名我们需要一个密钥，这个密钥<strong>只有服务器才能知道，不能泄露给用户</strong>，然后需要用在 JWT header 中，指定使用的签名算法，例如 HMAC SHA256 或者 RSA，进行签名。</p><p>以下是使用 HMAC SHA256 算法生成 JWT 签名的公式：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">HMACSHA256</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">base64UrlEncode</span><span style="color:#A6ACCD;">(header) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">base64UrlEncode</span><span style="color:#A6ACCD;">(payload)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  secret)</span></span></code></pre></div><p><strong>签名用于验证消息在此过程中没有更改</strong>，并且对于使用私钥进行签名的令牌，它还可以验证 JWT 的发送者的真实身份</p><p>算出签名以后，把 Header、Payload、Signature 三个部分拼成一个字符串，每个部分之间用&quot;点&quot;<code>.</code>分隔，就可以返回给用户。</p><p>我们用前面的 payload 生成一个 token 看看</p><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326135433.png" alt="" data-fancybox="gallery"></p><p><strong>得到一个 token 字符串</strong></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">eyJhbGciOiJIUzI</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">NiIsInR</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">cCI</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">IkpXVCJ</span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;">.eyJzdWIiOiIwNzcxIiwibmFtZSI</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">Ikxpbmp</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">bmMiLCJpYXQiOjE</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">MTIyMywidXNlcklkIjoic</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">Zoc</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">prZmhza</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">oifQ.xKsH</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">IZj</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">UizJ</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">a_zYplb</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">neUOoFrUW</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">ZLpgu</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">rbTqc</span></span></code></pre></div><p>在客户端登录时，会存储服务端发回来的 token，然后在每次请求时，都会在请求头中带上这个 token，服务端会验证这个 token 是否有效，如果有效，就会返回数据。</p><p>这样<strong>解决了使用服务端 session 方案需要在服务端维持状态的问题</strong>，我们利用 token 的 payload，来存放用于校验用户信息的数据，相当于是在客户端维持了状态。</p><p>同时我们可以在 token 的 payload 中<strong>设置过期时间</strong>的字段，用来维持短暂的登录状态，总之，我们将信息可以存储在 payload 当中。</p><p>现在我们来想想，之前我们在 Cookie 和服务端 session 上遇到的安全问题，JWT 有很好的解决吗？</p><ul><li>当用户<strong>退出登录</strong>了，前端删除了 token，但是由于服务端只有解密 token 的能力。这意味着，如果我们的 token 泄露了，这个 token 仍然是可以使用的，那么我们应该怎么处理呢？</li><li>另外，我们将 token 存在客户端中，会不会有 token 被<strong>篡改</strong>的问题呢？或者说<strong>捏造</strong> token 的问题呢？</li></ul><p>下面我们一一来看看 JWT 是如何解决这些安全问题的。</p><h3 id="jwt-是如何防止被篡改" tabindex="-1">JWT 是如何防止被篡改？ <a class="header-anchor" href="#jwt-是如何防止被篡改" aria-label="Permalink to &quot;JWT 是如何防止被篡改？&quot;">​</a></h3><p>在前面 JWT token 的生成规则中，我们知道，JWT 的签名部分会使用到 header 和 payload，以及一个 secret 私钥，这个私钥只有服务端才知道，所以我们可以利用这个特性，来防止 token 被篡改。</p><p>就算客户端拿到了 token，也无法伪造一个新的 token，因为它不知道 secret 私钥是什么，也就没有办法生成一个新的签名。</p><p>在整个 JWT 认证流程中，服务端在收到客户端请求头中携带的 token 时，会通过解析 token，然后<strong>使用相同的算法，将 header 和 payload 以及 secret 私钥进行签名</strong>，然后和 token 中的签名进行对比，如果一致，说明 token 没有被篡改，如果不一致，说明 token 被篡改了。</p><p>这样就确保了 JWT 被篡改后，服务端会拒绝这个 token 的场景。</p><p>而如果服务端的 密钥 secret 被泄露了，那就没救了，攻击人可能直接修改 header、payload 然后用密钥重新生成一个新的签名</p><p><strong>因此，我们需要保证密钥 secret 的安全性，他是 JWT 安全的核心所在。</strong></p><h3 id="如何实现退出登录" tabindex="-1">如何实现退出登录？ <a class="header-anchor" href="#如何实现退出登录" aria-label="Permalink to &quot;如何实现退出登录？&quot;">​</a></h3><p>前面我们说了，JWT 的机制，使得 token 天然的安全性会更高一些，可以有效的避免被篡改的问题。</p><p>但是我们知道 token 是无状态的，它的声明被存储在客户端，而不是服务端内存中。这意味着，如果我们想要<strong>退出登录</strong>，客户端删除了本地的 token，token 仍然生效，服务端并不知道这个 token 不能继续使用了。</p><p>那么我们应该怎么做呢？</p><p>这里想到了 3 种方法</p><ol><li>可以在 payload 种设置过期时间</li><li>服务端白名单机制</li><li>服务端黑名单机制</li></ol><p>下面我们一一来看看这三种方法</p><h4 id="在-payload-种设置过期时间" tabindex="-1">在 payload 种设置过期时间 <a class="header-anchor" href="#在-payload-种设置过期时间" aria-label="Permalink to &quot;在 payload 种设置过期时间&quot;">​</a></h4><p>我们可以在 payload 中设置一个过期时间的字段，比如叫 exp，然后在 token 生成的时候，设置一个过期时间，比如 1 小时，那么这个 token 就会在 1 小时后过期。</p><p>这样，当客户端请求时，服务端会解析 token，然后判断 token 是否过期，如果过期，就拒绝这个 token，如果没有过期，就继续处理。</p><p>这样我们在退出登录后，token 会在过期时间后失效，服务端就会拒绝这个 token。</p><p>但是这种方法有一个问题，就是<strong>如果用户的 token 被泄露了，那么攻击者就可以在 token 过期前，不断的使用这个 token</strong>，这样就会造成安全问题。</p><p>因此这只是一个<strong>临时的解决方案</strong>，我们需要更好的解决方案。</p><h4 id="服务端白名单机制" tabindex="-1">服务端白名单机制 <a class="header-anchor" href="#服务端白名单机制" aria-label="Permalink to &quot;服务端白名单机制&quot;">​</a></h4><p>白名单和黑名单的机制都是需要在服务端维护一个数据，来标记哪些 token 是失效的，或者哪些 token 是有效的。这种做法其实有点<strong>违背 JWT 的无状态的特性</strong>，但是这是一种比较常见的做法。</p><p>白名单机制就是<strong>维护一个有效的 token 列表</strong>，当用户登录时，服务端会把生成的 token 存在服务端的内存中。</p><p>在用户注销时，服务端会把这个 token 从内存中删除，这样，当用户再次请求时，服务端就会拒绝这个 token。</p><p>这种方式和 cookie、session 的机制很像，但同样会带来内存上的开销。</p><h4 id="服务端黑名单机制" tabindex="-1">服务端黑名单机制 <a class="header-anchor" href="#服务端黑名单机制" aria-label="Permalink to &quot;服务端黑名单机制&quot;">​</a></h4><p>黑名单机制和白名单机制相反，它维护一个<strong>无效的 token 列表</strong>，在用户<strong>注销登录</strong>后，会把用户 token 存到 token 列表中，当这个 token 再次被用来请求时，就会命中黑名单，而被拒绝请求</p><p>黑名单机制<strong>不需要</strong>将所有登录的 JWT 都缓存，只在退出时缓存，有效的缓解了服务器的压力。</p><p>黑名单机制非常巧妙的解决了内存消耗的问题，在实际场景中，token 过期的数量远远大于注销登录的数量，所以黑名单机制的内存消耗要远远小于白名单机制。</p><p>无论是白名单还是黑名单，都需要为 token 设置过期时间，避免 token 在内存中一直存在，造成内存泄露。</p><p>当然这些方法都存在各自的缺点，但是 JWT 的机制就是这样，在内存和安全之间做出了一个权衡。</p><h3 id="如何实现无感刷新" tabindex="-1">如何实现无感刷新？ <a class="header-anchor" href="#如何实现无感刷新" aria-label="Permalink to &quot;如何实现无感刷新？&quot;">​</a></h3><p>前面我们为了实现退出登录，为 token 设置了过期的时间，这样当 token 过期后，服务端就会拒绝这个 token。这样客户端就会频繁的需要重新登录。</p><p>那么我们需要如何实现无感刷新呢？在用户 token 过期前，自动刷新 token，让用户无感知的刷新 token。</p><h4 id="临近过期时间" tabindex="-1">临近过期时间 <a class="header-anchor" href="#临近过期时间" aria-label="Permalink to &quot;临近过期时间&quot;">​</a></h4><p>最容易想到的就是在每次请求的时候，判断 token 的过期时间，如果临近过期时间，我们就主动刷新 token，然后把新的 token 返回给客户端。</p><p>客户端每次请求都需要都需要<strong>检查新旧 token</strong>，更新本地 token，这样会造成客户端的负担，不太友好。</p><h4 id="refreshtoken-刷新机制" tabindex="-1">refreshToken 刷新机制 <a class="header-anchor" href="#refreshtoken-刷新机制" aria-label="Permalink to &quot;refreshToken 刷新机制&quot;">​</a></h4><p>我们可以引入 <code>refreshToken</code> 的概念，用来做刷新 token 的凭证，当 token 过期时，我们就用 <code>refreshToken</code> 来获取一个新的 token。</p><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326153644.png" alt="" data-fancybox="gallery"></p><p>在用户登录的时候，服务端返回<strong>两个 token</strong></p><ul><li>一个是 <code>accessToken</code>，用来做用户的鉴权，过期时间比较短，比如 1 小时</li><li>一个是 <code>refreshToken</code>，用来刷新 <code>accessToken</code>，过期时间比较长，比如 7 天</li></ul><p>客户端把这两个 token 都存在本地，每次访问都将 <code>accessToken</code> 传给服务端，服务端校验 <code>accessToken</code> 有效后，响应。</p><p>如果服务端校验 <code>accessToken</code> <strong>过期</strong>后，那么就需要将 <code>refreshToken</code> 传给服务端，如果 <code>refreshToken</code> 是有效的，那么服务端就会返回一个新的 <code>accessToken</code>，客户端就可以使用新的 <code>accessToken</code> 继续访问。</p><p>客户端需要更新本地的 <code>accessToken</code>，这样就实现了无感刷新。</p><p>这里一共会发送 2 次的 HTTP 请求，第一次过期被拒绝，第二次刷新 token。</p><p><strong>需要注意的是</strong></p><p>需要注意的是，为了保证安全性，刷新令牌通常会更长，并且<strong>只能用来获取新的访问令牌</strong>。而且，在设计刷新令牌时要考虑到其<strong>失效时间、有效范围</strong>等方面的控制，以减少安全风险。</p><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326161304.png" alt="" data-fancybox="gallery"></p><p>这里可能会有疑惑，<strong>两个 token 都需要存在客户端，这样岂不是很不安全吗？</strong></p><p>确实如此，但是由于 JWT 的出现就是为了解决服务端不想存储 session 的问题，所以这个问题没有很好的解决方案，我们只能让 <code>refreshToken</code> 的校验更加安全一些。</p><p>比如：可以通过<strong>绑定客户端 <code>client_id</code> 和 <code>client_secret</code></strong> 来保证 <code>refreshToken</code> 的安全性，这样就可以保证 <code>refreshToken</code> 只能在特定的客户端使用。</p><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><p>这样我们就完成了 JWT 相关的内容，这部分我们介绍了 JWT 的验证流程，JWT token 的生成规则，退出登录的实现，以及无感刷新的实现。</p><p>我们需要明确一点就是，JWT 是无状态的，服务端不需要存储任何信息，所以 JWT 的安全性取决于 token 的安全性。</p><h2 id="oauth-2-0" tabindex="-1">OAuth 2.0 <a class="header-anchor" href="#oauth-2-0" aria-label="Permalink to &quot;OAuth 2.0&quot;">​</a></h2><p>前面我们聊了很多种方式，其中也提到了 refreshToken 的方式，这里我们就来聊聊 OAuth 2.0。</p><p>它是一种常见的认证和授权协议。我们用微信公众号网页授权为例子，来看看它的认证流程。</p><h3 id="网页授权流程" tabindex="-1">网页授权流程 <a class="header-anchor" href="#网页授权流程" aria-label="Permalink to &quot;网页授权流程&quot;">​</a></h3><p>我们可以在微信开放平台上看到<a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html#%E7%9B%AE%E5%BD%95" target="_blank" rel="noreferrer">网页授权流程</a>。</p><p><strong>主要有四步</strong></p><ol><li>引导用户进入授权页面同意授权，获取code</li><li>通过 code 换取网页授权 access_token（与基础支持中的access_token不同）</li><li>如果需要，开发者可以刷新网页授权 access_token，避免过期</li><li>通过网页授权 access_token 和 openid 获取用户基本信息（支持UnionID机制）</li></ol><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326163949.png" alt="" data-fancybox="gallery"></p><p>具体的流程和实现是这样的：</p><ol><li>首先客户端向授权平台发送认证请求，请求参数为重定向 URI 以及公众号的唯一标识 appid 等信息，重定向 URI 是一个URL，用于接收授权服务器的响应，并包含授权码。</li><li>授权服务器验证资源所有者的身份，并要求资源所有者批准客户端的请求。</li><li>在完成授权后，会跳转到 重定向 uri 并附上授权码 code，即 <code>redirect_uri/?code=CODE&amp;state=STATE</code></li><li>接下来我们通过这个授权码 code，向服务器请求 accessToken</li><li>客户端存储这个 token 来访问资源</li></ol><p>在微信的开放能力中，<strong>都需要有 accessToken 来访问开放能力接口</strong></p><p>在实际场景中，服务端一般不会直接返回用于网页授权的 access_token 给客户端，而是会返回一个 token，这是另一个 jwt 生成的 token，而 access_token 会由服务端来管理，这样就可以保证 access_token 的安全性。</p><p>我们在授权登录后，服务端会生成一个 token 返回给客户端，并将 token 和 access_token 存在服务端 session 中，我们通过 token 来请求能力接口时，会先验证 token 是否生效，再通过 session 中的 access_token 来请求能力接口。</p><h3 id="refreshtoken-刷新机制-1" tabindex="-1">refreshToken 刷新机制 <a class="header-anchor" href="#refreshtoken-刷新机制-1" aria-label="Permalink to &quot;refreshToken 刷新机制&quot;">​</a></h3><p>在 JWT 中我们也有讲到 refreshToken 的刷新机制，这里是一样的，只不过这个 refreshToken 是由授权服务器生成的。</p><p>相当于现在服务端会存三个 token：jwtToken、accessToken、refreshToken。</p><p>用户通过 jwtToken 来访问，由后端来验证 jwtToken 的有效性，再来做向能力接口请求或者是刷新 accessToken 的操作</p><h2 id="sso-单点登录" tabindex="-1">SSO 单点登录 <a class="header-anchor" href="#sso-单点登录" aria-label="Permalink to &quot;SSO 单点登录&quot;">​</a></h2><p>前面我们采用了各种方式实现了身份认证，但是现在有这样一个问题，如果我们有多个系统，每个系统都需要登录，这样的体验就非常不好，那么我们就需要采用单点登录的方式来实现。</p><p>所谓单点登录，就是用户在一个系统登录后，其他系统可以直接访问，不需要再次登录。</p><p>下面我们来看看 SSO 的登录流程是怎么样的？</p><h3 id="sso-登录流程" tabindex="-1">SSO 登录流程 <a class="header-anchor" href="#sso-登录流程" aria-label="Permalink to &quot;SSO 登录流程&quot;">​</a></h3><p>我们以一个全新的用户为例，登录 a.com 和 <code>b.com</code> 这两个子系统时，SSO 的登录流程是怎么样的？ 首先我们先了解几个名词，不然看着会很懵</p><ul><li><code>ticket</code>：ticket 是 <strong>SSO 系统</strong>发给子系统的凭证，用来向子系统证明用户身份，<strong>获取子系统 token</strong></li><li><code>token</code>：子系统的访问凭证，用来<strong>访问子系统的资源</strong></li><li>局部会话：局部会话是指用户在子系统中的会话，也就是用户在<strong>子系统中</strong>的登录状态</li><li>全局会话：全局会话是指用户在 SSO 系统中的会话，也就是用户在 <strong>SSO 系统中</strong>的登录状态</li></ul><p><img src="https://ljcimg.oss-cn-beijing.aliyuncs.com/imgtwo/20230326180912.png" alt="" data-fancybox="gallery"></p><p><strong>SSO 首次登录</strong></p><ol><li>用户访问 <code>a.com</code>，<code>a.com</code> 发现没有登录，没有 <code>ticket</code>，<strong>跳转到 SSO 系统的登录页面</strong>，进行身份认证</li><li>在登录完成后，SSO 系统会生成一个 <code>ticket</code>，然后重定向到 <code>a.com</code>，并且<strong>带上 <code>ticket</code></strong>，有点类似网页授权带的 code</li><li><code>a.com</code> 拿到 <code>ticket</code> 后，向 <code>a.com</code> 服务端发送请求，a,com 服务端会向 SSO 系统发送请求，<strong>验证 <code>ticket</code> 的有效性</strong></li><li><code>ticket</code> 有效，会<strong>生成一个 token</strong>，然后返回给客户端，客户端拿到 token 后，存储起来，用于后续直接登录</li></ol><p><strong>SSO 已登录，访问 b.com</strong></p><p>在上面我们完成了 A 系统的登录认证，并完成了 SSO 登录，现在要使用 B 系统了，看看会发生什么</p><ol><li>用户进入 <code>b.com</code>，没有 <code>ticket</code>，没有 token，B 系统<strong>重定向到 SSO</strong></li><li>SSO 登陆过，<strong>不需要再次登录</strong>，再跳回 B 系统，携带 <code>ticket</code></li><li>B 系统被再次访问，携带了 <code>ticket</code>，会向 SSO 验证 <code>ticket</code> <strong>是否有效</strong></li><li>B 系统放行，生成 token，<strong>发布 B 系统登录凭证</strong></li></ol><p><strong>A，B 系统均登录</strong></p><ul><li>用户进入系统，判断 token 是否失效即可</li></ul><p>在上面的流程中，我们介绍了 SSO 登录的大体过程，虽然流程没什么问题，但是我们从<strong>安全性</strong>的角度来想想，我们在传输 <code>ticket</code> 的时候，通过重写 URL 的方式，这样直接将 <code>ticket</code> 暴漏在了 URL 上，存在比较大的安全风险。</p><p>可以采用 JWT 方式<strong>提高 ticket 的安全性</strong>。</p><h3 id="sso-存在的问题" tabindex="-1">SSO 存在的问题 <a class="header-anchor" href="#sso-存在的问题" aria-label="Permalink to &quot;SSO 存在的问题&quot;">​</a></h3><h3 id="如何防止-ticket-被篡改" tabindex="-1">如何防止 ticket 被篡改？ <a class="header-anchor" href="#如何防止-ticket-被篡改" aria-label="Permalink to &quot;如何防止 ticket 被篡改？&quot;">​</a></h3><p>ticket 里边是有用户凭证的，黑客如果篡改了 ticket 里边的用户凭证，比如改成黑客自己的，那到子系统 A 登录的时候，登录的就是黑客的身份了。</p><p>那么我们可以参照 JWT 的方式，采用私钥加密，通过 payload 传输数据。</p><p>只要加密数字签名的私钥不泄露，就无法捏造有效的数字签名。</p><h3 id="如何防止-ticket-被盗用" tabindex="-1">如何防止 ticket 被盗用？ <a class="header-anchor" href="#如何防止-ticket-被盗用" aria-label="Permalink to &quot;如何防止 ticket 被盗用？&quot;">​</a></h3><p>前面也说到 <code>ticket</code> 拼接在地址栏，安全风险很大，如果黑客拿到我们的 <code>ticket</code>，岂不是能直接去子系统 A 登录了？</p><p>我们可以在颁布 <code>ticket</code> 的时候，获取用户的 ip 作为 payload 的一部分，采用 JWT 机制，来生成 <code>ticket</code>，在验证 <code>ticket</code> 有效性的时候，再次获取用户的 ip，并解析 payload 中的 ip，对比是否一致</p><p>当然，这种方式有一定的缺点，黑客可以通过伪造 ip 的方式来绕过这个检验。</p><blockquote><p><strong>个人感觉</strong>可以采用携带 code 的方式，再向 SSO 请求 ticket，通过 HTTP 请求的方式，而不是重定向的方式。这样拿到 ticket 之后，就可以验证信息了。</p></blockquote><h3 id="ticket-如何设置只允许使用一次" tabindex="-1"><code>ticket</code> 如何设置只允许使用一次？ <a class="header-anchor" href="#ticket-如何设置只允许使用一次" aria-label="Permalink to &quot;`ticket` 如何设置只允许使用一次？&quot;">​</a></h3><p><code>ticket</code> 被多次使用，会有很大的风险。</p><p>可以在颁布 <code>ticket</code> 的时候，将 <code>ticket</code> 存储在 Redis 中，并设置一定的过期时间。</p><p>如果子系统验证 <code>ticket</code> 有效的时候，我们就会删除这个 <code>ticket</code>。</p><p>如果 Redis 不存在这个 <code>ticket</code> ，有可能是过期了，也可能是被用过了，都是失效了，需要重新生成。</p><h3 id="如何防止重放攻击" tabindex="-1">如何防止重放攻击？ <a class="header-anchor" href="#如何防止重放攻击" aria-label="Permalink to &quot;如何防止重放攻击？&quot;">​</a></h3><p><strong>重放攻击就是</strong>：黑客拦截了我们的请求，获得我们发给服务端的一个合法请求，然后重复的发送该合法请求，若该请求耗时过长，极端调用可能会搞崩我们的系统。</p><p>那么解决方法很简单，让合法的请求，只能被执行一次，保证每次请求的唯一性。</p><p><strong>时间戳和随机数</strong></p><p>在每个请求中添加一个时间戳或随机数，并将其与服务器上已接收到的值进行比较，如果时间戳或随机数相同，则认为是重复的请求。</p><p><strong>限制请求频率</strong></p><p>限制来自同一 IP 或用户的请求频率，防止恶意攻击者重复发送相同的请求。</p><h2 id="如何选择合适的前端鉴权方式" tabindex="-1">如何选择合适的前端鉴权方式？ <a class="header-anchor" href="#如何选择合适的前端鉴权方式" aria-label="Permalink to &quot;如何选择合适的前端鉴权方式？&quot;">​</a></h2><p>看到这里，我们已经介绍了 Cookie、Session、JWT、oAuth、SSO各种登录认证的方式，那么我们在实际场景中，该怎么去选择呢？需要考虑什么因素呢？</p><h3 id="安全性" tabindex="-1">安全性 <a class="header-anchor" href="#安全性" aria-label="Permalink to &quot;安全性&quot;">​</a></h3><p>不同的鉴权方式的安全性不同，Cookie 和 Session 等传统鉴权方式存在<strong>被劫持、伪造</strong>等风险；而 JWT 等基于 Token 的鉴权方式则能有效避免这些风险。</p><p>如果基于安全性考虑，可以<strong>选择 JWT 这种验证方式</strong>，它提供了一种简单而安全的方法来传输用户凭据并防止 CSRF 和 XSS 等攻击。</p><h3 id="扩展性" tabindex="-1">扩展性 <a class="header-anchor" href="#扩展性" aria-label="Permalink to &quot;扩展性&quot;">​</a></h3><p>如果您需要一个可扩展的身份验证方案，建议使用 OAuth 2.0。它是一个开放标准，可以与多个应用程序和服务集成，并具有灵活的授权机制。</p><h3 id="多平台" tabindex="-1">多平台 <a class="header-anchor" href="#多平台" aria-label="Permalink to &quot;多平台&quot;">​</a></h3><p>如果是大型企业，或者学校，这种应用体系复杂的场景，<strong>可以考虑 SSO</strong>。为用户提供无缝的登录体验，在各个应用程序之间自由切换。</p><p>...</p><p>总之，选择合适的鉴权方式需要考虑多个因素，包括安全性、扩展性、用户体验、跨平台支持和访问控制等。</p><h2 id="总结-1" tabindex="-1">总结 <a class="header-anchor" href="#总结-1" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>文章的最后，总结一下，这篇文章从 HTTP 是无状态的讲起，到 Cookie、Session、到 JWT 的演变，它们都在往更好的方向发展，不断的解决遗留下来的问题。</p><p>本文的要点如下：</p><ul><li>HTTP 是无状态的，因此需要客户端存储标记</li><li>Cookie 方案将用户信息存储在客户端，存在被篡改、被盗用的风险</li><li>服务端 session 方案，依赖于 Cookie 实现，将用户信息存储在服务端，在客户端存放 sessionID，占用服务端资源</li><li>JWT 利用 token 机制，增强了安全性</li><li>SSO 单点登录，解决了多个系统登录的问题</li></ul><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://juejin.cn/post/6898630134530752520#heading-5" target="_blank" rel="noreferrer">前端鉴权的兄弟们：cookie、session、token、jwt、单点登录</a></li><li><a href="https://juejin.cn/post/7151033800577777694#heading-3" target="_blank" rel="noreferrer">【SSO单点登录】JWT续签问题 &amp;&amp; OAuth2.0 中的refreshToken刷新机制</a></li><li><a href="https://juejin.cn/post/6844903632987488264#heading-6" target="_blank" rel="noreferrer">不要用JWT替代session管理（上）：全面了解Token,JWT,OAuth,SAML,SSO</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><div class="edit-info" data-v-face870a><!----><div class="last-updated" data-v-face870a><p class="VPLastUpdated" data-v-face870a data-v-7b3ebfe1>Last updated: <time datetime="2023-07-02T11:26:32.000Z" data-v-7b3ebfe1></time></p></div></div><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><!----></div><div class="pager" data-v-face870a><a class="pager-link next" href="/pages/summary/webpack_rollup.html" data-v-face870a><span class="desc" data-v-face870a>Next page</span><span class="title" data-v-face870a>Webpack 和 Rollup：您应该知道的一些事情</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-b2cf3e0b data-v-f7fc41f4><div class="container" data-v-f7fc41f4><p class="message" data-v-f7fc41f4>Released under the MIT License.</p><p class="copyright" data-v-f7fc41f4>Copyright © 2021-present linjunc  粤ICP备2021119090号 </p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"pages_algorithm_bitwise.md\":\"ef98ed7e\",\"index.md\":\"e910db0c\",\"pages_algorithm_algorithm.md\":\"fa040075\",\"pages_about_about.md\":\"6730e94a\",\"pages_about_2021.md\":\"7ca22a8f\",\"pages_algorithm_sort.md\":\"c0fc25b3\",\"pages_algorithm_string.md\":\"737e2652\",\"pages_algorithm_tree.md\":\"18b8de52\",\"pages_algorithm_greedy.md\":\"730c4bc7\",\"pages_chrome_render.md\":\"d5deac28\",\"pages_algorithm_link.md\":\"db49e520\",\"pages_css_layout_flex.md\":\"0c710339\",\"pages_css_style_less.md\":\"57dc6d96\",\"pages_css_layout_grid.md\":\"6382e0ad\",\"pages_algorithm_dynamic.md\":\"742dae10\",\"pages_handwriting_array.md\":\"8b803217\",\"pages_handwriting_part.md\":\"c83c9dac\",\"pages_handwriting_handwriting.md\":\"8d627d51\",\"pages_handwriting_react.md\":\"e38d5d12\",\"pages_interview_all_intime.md\":\"3da28ab0\",\"pages_handwriting_reg.md\":\"3e03370b\",\"pages_interview_all_css_css.md\":\"bd67057a\",\"pages_interview_all_js.md\":\"82034a31\",\"pages_network_datalink.md\":\"b1d7432a\",\"pages_interview_heading_best2.md\":\"cd64ec0d\",\"pages_interview_all_html.md\":\"f318cd51\",\"pages_handwriting_promise.md\":\"14ed7322\",\"pages_interview_all_dachang.md\":\"5c7e7e6a\",\"pages_interview_heading_best3.md\":\"60b71450\",\"pages_react_hard_commit_beforemutation.md\":\"d543495f\",\"pages_network_tcpudp.md\":\"4bf6c6cc\",\"pages_network_writing.md\":\"100c6157\",\"pages_network_transmission.md\":\"8f837302\",\"pages_interview_heading_route.md\":\"f0a5e9a3\",\"pages_network_web.md\":\"f266d811\",\"pages_network_websocket.md\":\"903adfee\",\"pages_react_hard_commit_commit.md\":\"995b2a46\",\"pages_network_application.md\":\"dc5fd7e7\",\"pages_network_interview-network.md\":\"b44b6afb\",\"pages_private_experience_2023.md\":\"3329cc75\",\"pages_network_http.md\":\"580eea15\",\"pages_network_overview.md\":\"2facb9bf\",\"pages_network_physics.md\":\"c193d8df\",\"pages_network_statuscode.md\":\"eee3d49e\",\"pages_interview_heading_best1.md\":\"ace073fa\",\"pages_network_https.md\":\"ed8a6fe8\",\"pages_network_cache.md\":\"bce01042\",\"pages_react_hard_commit_layout.md\":\"b629fcbe\",\"pages_react_hard_commit_qa.md\":\"c14d34d0\",\"pages_react_hard_diff_singlediff.md\":\"e1d1f9cd\",\"pages_react_hard_hooks_qa.md\":\"fe19cc68\",\"pages_react_hard_commit_mutation.md\":\"7b2e4ae9\",\"pages_react_hard_update_priority.md\":\"1533c6f6\",\"pages_react_hard_update_updatecode.md\":\"4bbcf3bf\",\"pages_react_hard_hooks_useref.md\":\"918e693a\",\"pages_react_hard_writing.md\":\"259a4bf2\",\"pages_react_primary_antd.md\":\"83e31e3f\",\"pages_react_primary_cli.md\":\"47c83383\",\"pages_react_primary_component.md\":\"8c03324a\",\"pages_react_primary_diff.md\":\"b85c1c2d\",\"pages_react_primary_github.md\":\"7482e9a4\",\"pages_react_primary_hooks.md\":\"9389c18e\",\"pages_react_primary_lifecycle.md\":\"018a932f\",\"pages_react_primary_params.md\":\"689ffd29\",\"pages_react_primary_proxy.md\":\"d0f1911e\",\"pages_react_primary_pubsub.md\":\"cf0e2219\",\"pages_react_primary_react-redux.md\":\"0037cc15\",\"pages_react_hard_scheduler_scheduler-origin.md\":\"502df91d\",\"pages_react_primary_react-router.md\":\"5949cf3e\",\"pages_react_hard_hooks_usetransition.md\":\"5f1f449f\",\"pages_react_hard_hooks_hooks.md\":\"492cc2f0\",\"pages_react_hard_fiberidea.md\":\"98a99261\",\"pages_react_hard_update_update.md\":\"07692f33\",\"pages_react_hard_readme.md\":\"280650eb\",\"pages_react_hard_diff_diffpre.md\":\"16d18b56\",\"pages_react_hard_hooks_usestate.md\":\"5d0b2d54\",\"pages_react_hard_hooks_usereducer.md\":\"1635f30b\",\"pages_react_hard_scheduler_scheduler.md\":\"9507c5c0\",\"pages_summary_engine.md\":\"cafd171d\",\"pages_summary_ts.md\":\"08d6cf29\",\"pages_summary_v8.md\":\"c42daaf4\",\"pages_summary_weakmap.md\":\"4c4abcc2\",\"pages_summary_webpack_rollup.md\":\"b582dcdd\",\"pages_tschallenge_hard.md\":\"87e887f9\",\"pages_tschallenge_easy.md\":\"9221561e\",\"pages_structure_readme.md\":\"27085693\",\"pages_work_oneversion.md\":\"85876d7e\",\"pages_react_reactinterview_common.md\":\"7edac282\",\"pages_react_reactinterview_easy.md\":\"ea5481b2\",\"pages_structure_set.md\":\"567ea3a5\",\"pages_structure_graph.md\":\"a4c0a558\",\"pages_structure_map.md\":\"29151910\",\"pages_structure_queue.md\":\"85920ac5\",\"pages_structure_tree.md\":\"c40ee0d9\",\"pages_structure_stack.md\":\"edee16dd\",\"pages_structure_start.md\":\"37ce2a5d\",\"pages_summary_animate.md\":\"dd635362\",\"pages_summary_arrayapi.md\":\"0e814e91\",\"pages_structure_heap.md\":\"13a709ff\",\"pages_structure_link.md\":\"b8a63762\",\"pages_react_hard_render_completework.md\":\"3f639f3f\",\"pages_tschallenge_medium.md\":\"d805c773\",\"pages_react_primary_redux.md\":\"9cb64d45\",\"pages_react_primary_todolist.md\":\"4bf1c99f\",\"pages_summary_monorepo.md\":\"263a62f7\",\"pages_react_hard_hooks_useid.md\":\"8c3c62cd\",\"pages_react_primary_share.md\":\"c09d4713\",\"pages_react_hard_render_beginwork.md\":\"40225eed\",\"pages_react_hard_hooks_useeffect.md\":\"8810b2f5\",\"pages_react_hard_hooks_uselayouteffect.md\":\"1bd603f3\",\"pages_react_primary_jsx.md\":\"de396256\",\"pages_react_hard_diff_arraydiff.md\":\"ba5e5a30\",\"pages_summary_event.md\":\"8a9ec8c4\",\"pages_summary_git.md\":\"08978185\",\"pages_summary_highf.md\":\"c3320b0d\",\"pages_summary_inherit.md\":\"a4491bb7\",\"pages_summary_generator.md\":\"16a022b1\",\"pages_react_hard_hooks_usememo-callback.md\":\"16ec8338\",\"pages_summary_iterator.md\":\"2c6c92b1\",\"pages_summary_qrcode.md\":\"34269c5d\",\"pages_react_primary_more.md\":\"a9eab4d6\",\"pages_react_primary_router.md\":\"f2433474\",\"pages_react_hard_constructure.md\":\"77a1ec86\",\"pages_summary_jsx2js.md\":\"2f077931\",\"pages_summary_login.md\":\"6071e493\",\"pages_summary_jsrun.md\":\"b9e2dd74\",\"pages_react_hard_hooks_usecontext.md\":\"9a065c8f\",\"pages_summary_prototype.md\":\"f456497e\",\"pages_summary_storage.md\":\"86df8f96\",\"pages_summary_npm.md\":\"b1f98360\",\"pages_summary_recoil.md\":\"f217169f\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"小丞前端日记\",\"description\":\"小丞同学的博客，致力于分享高质量的 React,JS 相关博文\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"logo\":\"/avatar.jpg\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/linjunc/linjunc.github.io\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2021-present linjunc  粤ICP备2021119090号 \"},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"各类知识点\",\"items\":[{\"text\":\"前端总结\",\"link\":\"/pages/summary/ts.md\"},{\"text\":\"TS 类型挑战\",\"link\":\"/pages/tschallenge/easy.md\"},{\"text\":\"计算机网络\",\"link\":\"/pages/network/overview.md\"},{\"text\":\"数据结构和算法\",\"link\":\"/pages/structure/start.md\"},{\"text\":\"CSS 布局方式\",\"link\":\"/pages/css/layout/flex.md\"}]},{\"text\":\"前端面试合集\",\"items\":[{\"text\":\"面试题精选\",\"link\":\"/pages/interview/heading/best1.md\"},{\"text\":\"面试题合集\",\"link\":\"/pages/interview/all/html.md\"},{\"text\":\"手写系列\",\"link\":\"/pages/handwriting/handwriting.md\"},{\"text\":\"算法合集\",\"link\":\"/pages/algorithm/algorithm.md\"}]},{\"text\":\"React 全家桶\",\"items\":[{\"text\":\"React 入门\",\"link\":\"/pages/react/primary/jsx.md\"},{\"text\":\"React 源码解析\",\"link\":\"/pages/react/hard/fiberidea.md\"},{\"text\":\"React 面试题合集\",\"link\":\"/pages/react/reactinterview/common.md\"}]},{\"text\":\"关于我\",\"items\":[{\"text\":\"关于我\",\"link\":\"/pages/about/about.md\"},{\"text\":\"GitHub\",\"link\":\"https://github.com/linjunc\"},{\"text\":\"掘金\",\"link\":\"https://juejin.cn/user/1460594842018446\"},{\"text\":\"CSDN\",\"link\":\"https://blog.csdn.net/m0_50855872\"}]}],\"sidebar\":{\"/pages/private/experience\":[{\"text\":\"面试经验\",\"items\":[{\"link\":\"/pages/private/experience/2023.md\",\"text\":\"面经\"}]}],\"/pages/network/\":[{\"text\":\"计算机网络\",\"items\":[{\"link\":\"/pages/network/overview.md\",\"text\":\"概述\"},{\"link\":\"/pages/network/physics.md\",\"text\":\"物理层\"},{\"link\":\"/pages/network/datalink.md\",\"text\":\"数据链路层\"},{\"link\":\"/pages/network/web.md\",\"text\":\"网络层\"},{\"link\":\"/pages/network/http.md\",\"text\":\"HTTP 协议相关面试题\"},{\"link\":\"/pages/network/https.md\",\"text\":\"HTTPS 相关\"},{\"link\":\"/pages/network/statuscode.md\",\"text\":\"HTTP 状态码相关\"},{\"link\":\"/pages/network/tcpudp.md\",\"text\":\"TCP 和 UDP 协议\"},{\"link\":\"/pages/network/cache.md\",\"text\":\"浏览器缓存\"},{\"link\":\"/pages/network/websocket.md\",\"text\":\"WebSocket 相关\"},{\"link\":\"/pages/network/interview-network.md\",\"text\":\"面试被问到的计网\"}]}],\"/pages/react/primary/\":[{\"text\":\"React 入门学习\",\"items\":[{\"link\":\"/pages/react/primary/jsx.md\",\"text\":\"基础知识以及 jsx语法\"},{\"link\":\"/pages/react/primary/component.md\",\"text\":\"面向组件编程\"},{\"link\":\"/pages/react/primary/lifecycle.md\",\"text\":\"组件的生命周期\"},{\"link\":\"/pages/react/primary/diff.md\",\"text\":\"diff 算法\"},{\"link\":\"/pages/react/primary/cli.md\",\"text\":\"初始化脚手架\"},{\"link\":\"/pages/react/primary/todolist.md\",\"text\":\"todoList案例\"},{\"link\":\"/pages/react/primary/proxy.md\",\"text\":\"脚手架配置代理\"},{\"link\":\"/pages/react/primary/github.md\",\"text\":\"GitHub 搜索案例\"},{\"link\":\"/pages/react/primary/pubsub.md\",\"text\":\"消息订阅发布\"},{\"link\":\"/pages/react/primary/router.md\",\"text\":\"React 路由\"},{\"link\":\"/pages/react/primary/params.md\",\"text\":\"React 路由传参\"},{\"link\":\"/pages/react/primary/react-router.md\",\"text\":\" React 路由跳转\"},{\"link\":\"/pages/react/primary/antd.md\",\"text\":\"antd 的基本使用\"},{\"link\":\"/pages/react/primary/redux.md\",\"text\":\"redux 的基本使用\"},{\"link\":\"/pages/react/primary/react-redux.md\",\"text\":\"react-redux 的基本使用\"},{\"link\":\"/pages/react/primary/share.md\",\"text\":\"数据共享\"},{\"link\":\"/pages/react/primary/more\",\"text\":\"React 扩展\"},{\"link\":\"/pages/react/primary/hooks\",\"text\":\"React Hooks\"}]}],\"/pages/react/hard/\":[{\"text\":\"React 源码解析\",\"items\":[{\"link\":\"/pages/react/hard/readme.md\",\"text\":\"专栏介绍\"}]},{\"text\":\"React 哲学\",\"items\":[{\"link\":\"/pages/react/hard/fiberidea.md\",\"text\":\"React 设计理念\"},{\"link\":\"/pages/react/hard/constructure.md\",\"text\":\"React Fiber 架构\"}]},{\"text\":\"Render 阶段\",\"items\":[{\"link\":\"/pages/react/hard/render/beginwork.md\",\"text\":\"Render 阶段 -- Beginwork\"},{\"link\":\"/pages/react/hard/render/completework.md\",\"text\":\"Render 阶段 -- Completework\"}]},{\"text\":\"Commit 阶段\",\"items\":[{\"link\":\"/pages/react/hard/commit/commit.md\",\"text\":\"流程概览\"},{\"link\":\"/pages/react/hard/commit/beforemutation.md\",\"text\":\"Before Mutation 阶段\"},{\"link\":\"/pages/react/hard/commit/mutation.md\",\"text\":\"Mutation 阶段\"},{\"link\":\"/pages/react/hard/commit/layout.md\",\"text\":\"Layout 阶段\"},{\"link\":\"/pages/react/hard/commit/qa.md\",\"text\":\"Q & A\"}]},{\"text\":\"Diff 算法\",\"items\":[{\"link\":\"/pages/react/hard/diff/diffpre.md\",\"text\":\"Diff 算法概览\"},{\"link\":\"/pages/react/hard/diff/singlediff.md\",\"text\":\"单一节点的 Diff\"},{\"link\":\"/pages/react/hard/diff/arraydiff.md\",\"text\":\"多节点的 Diff\"}]},{\"text\":\"状态更新\",\"items\":[{\"link\":\"/pages/react/hard/update/update.md\",\"text\":\"状态更新流程概览\"},{\"link\":\"/pages/react/hard/update/priority.md\",\"text\":\"优先级更新\"},{\"link\":\"/pages/react/hard/update/updatecode.md\",\"text\":\"状态更新调度源码解析\"}]},{\"text\":\"Scheduler 模块\",\"items\":[{\"link\":\"/pages/react/hard/scheduler/scheduler-origin.md\",\"text\":\"Scheduler 实现原理\"},{\"link\":\"/pages/react/hard/scheduler/scheduler.md\",\"text\":\"Scheduler 源码解析\"}]},{\"text\":\"Hooks 实现\",\"items\":[{\"link\":\"/pages/react/hard/hooks/hooks.md\",\"text\":\"Hooks 实现原理\"},{\"link\":\"/pages/react/hard/hooks/useState.md\",\"text\":\"useState  源码解读\"},{\"link\":\"/pages/react/hard/hooks/usereducer.md\",\"text\":\"useReducer  源码解读\"},{\"link\":\"/pages/react/hard/hooks/usecontext.md\",\"text\":\"useContext 源码解读\"},{\"link\":\"/pages/react/hard/hooks/useeffect.md\",\"text\":\"useEffect 源码解读\"},{\"link\":\"/pages/react/hard/hooks/uselayouteffect.md\",\"text\":\"useLayoutEffect 源码解读\"},{\"link\":\"/pages/react/hard/hooks/useref.md\",\"text\":\"useRef  源码解读\"},{\"link\":\"/pages/react/hard/hooks/usememo-callback.md\",\"text\":\"useMemo & useCallback 源码解读\"},{\"link\":\"/pages/react/hard/hooks/useId.md\",\"text\":\"useId 源码解读\"},{\"link\":\"/pages/react/hard/hooks/usetransition.md\",\"text\":\"useTransition 源码解读\"},{\"link\":\"/pages/react/hard/hooks/qa.md\",\"text\":\"Q & A\"}]}],\"/pages/react/reactinterview/\":[{\"text\":\"React 面试题合集\",\"items\":[{\"link\":\"/pages/react/reactinterview/common.md\",\"text\":\"React 常见面试题\"},{\"link\":\"/pages/react/reactinterview/easy.md\",\"text\":\"React 一些比较简单的问题\"}]}],\"/pages/interview/heading/\":[{\"text\":\"前端面试题精选\",\"items\":[{\"link\":\"/pages/interview/heading/best1.md\",\"text\":\"面试题精选1\"},{\"link\":\"/pages/interview/heading/best2.md\",\"text\":\"面试题精选2\"},{\"link\":\"/pages/interview/heading/best3.md\",\"text\":\"面试题精选3\"}]}],\"/pages/interview/all/\":[{\"text\":\"面试题合集\",\"items\":[{\"link\":\"/pages/interview/all/html.md\",\"text\":\"HTML 面试题\"},{\"link\":\"/pages/interview/all/css/css.md\",\"text\":\"CSS 面试题\"},{\"link\":\"/pages/interview/all/js.md\",\"text\":\"JS 面试题\"}]}],\"/pages/handwriting/\":[{\"text\":\"手写系列\",\"items\":[{\"link\":\"/pages/handwriting/handwriting.md\",\"text\":\"手写题\"},{\"link\":\"/pages/handwriting/array.md\",\"text\":\"数组方法\"},{\"link\":\"/pages/handwriting/promise.md\",\"text\":\"Promise\"},{\"link\":\"/pages/handwriting/part.md\",\"text\":\"场景应用\"},{\"link\":\"/pages/handwriting/reg.md\",\"text\":\"正则表达式\"},{\"link\":\"/pages/handwriting/react.md\",\"text\":\"React 手写\"}]}],\"/pages/algorithm/\":[{\"text\":\"算法合集\",\"items\":[{\"link\":\"/pages/algorithm/algorithm.md\",\"text\":\"算法合集\"},{\"link\":\"/pages/algorithm/string.md\",\"text\":\"字符串\"},{\"link\":\"/pages/algorithm/dynamic.md\",\"text\":\"动态规划\"},{\"link\":\"/pages/algorithm/greedy.md\",\"text\":\"贪心算法\"},{\"link\":\"/pages/algorithm/link.md\",\"text\":\"链表\"},{\"link\":\"/pages/algorithm/tree.md\",\"text\":\"树\"},{\"link\":\"/pages/algorithm/sort.md\",\"text\":\"排序算法\"},{\"link\":\"/pages/algorithm/bitwise.md\",\"text\":\"位运算\"}]}],\"/pages/summary/\":[{\"text\":\"前端总结\",\"items\":[{\"link\":\"/pages/summary/login.md\",\"text\":\"面对前端鉴权登录，你需要知道的一切。从 Cookie 到 JWT、从 Session 到 SSO\"},{\"link\":\"/pages/summary/webpack_rollup.md\",\"text\":\"Webpack 和 Rollup：您应该知道的一些事情\"},{\"link\":\"/pages/summary/monorepo.md\",\"text\":\"为什么越来越多的项目选择 Monorepo?\"},{\"link\":\"/pages/summary/jsx2js.md\",\"text\":\"我们编写的 JSX 是如何通过构建工具转换成 JS 的\"},{\"link\":\"/pages/summary/engine.md\",\"text\":\"我是这样搭建 React + TypeScript 项目的\"},{\"link\":\"/pages/summary/ts.md\",\"text\":\"TS 类型体操还能这么玩，太秀了！\"},{\"link\":\"/pages/summary/event.md\",\"text\":\"Event 对象，这些你都知道吗？\"},{\"link\":\"/pages/summary/qrcode.md\",\"text\":\"如何优雅的在 H5 网页中实现扫码功能\"},{\"link\":\"/pages/summary/animate.md\",\"text\":\"为什么 CSS 动画比 JavaScript 高效？\"},{\"link\":\"/pages/summary/git.md\",\"text\":\"通俗易懂的GIT入门\"},{\"link\":\"/pages/summary/prototype.md\",\"text\":\"三张图轻松KO⚡ JS 原型和原型链\"},{\"link\":\"/pages/summary/v8.md\",\"text\":\"你知道 V8 是如何执行JS代码的吗？\"},{\"link\":\"/pages/summary/weakmap.md\",\"text\":\"浅析 Map 和 WeakMap 区别以及使用场景\"},{\"link\":\"/pages/summary/jsrun.md\",\"text\":\"新生代总结 JavaScript 运行机制解析\"},{\"link\":\"/pages/summary/inherit.md\",\"text\":\"JS 继承的7种方法，你学会了吗？\"},{\"link\":\"/pages/summary/arrayapi.md\",\"text\":\"原生 JavaScript 手写数组 API\"},{\"link\":\"/pages/summary/iterator.md\",\"text\":\"【深扒】JavaScript 中的迭代器\"},{\"link\":\"/pages/summary/generator.md\",\"text\":\"【深扒】JavaScript 中的生成器\"},{\"link\":\"/pages/summary/highf.md\",\"text\":\"JavaScript中的高阶函数\"},{\"link\":\"/pages/summary/npm.md\",\"text\":\"经常使用npm命令，你真的知道它的意思吗？\"},{\"link\":\"/pages/summary/storage.md\",\"text\":\"Javascript客户端存储技术你知道多少？\"}]}],\"/pages/about/\":[{\"text\":\"About Me\",\"items\":[{\"link\":\"/pages/about/about.md\",\"text\":\"关于我\"},{\"link\":\"/pages/about/2021.md\",\"text\":\"2021 年终总结\"}]}],\"/pages/structure/\":[{\"text\":\"数据结构和算法\",\"items\":[{\"link\":\"/pages/structure/start.md\",\"text\":\"从这里开启数据结构和算法\"},{\"link\":\"/pages/structure/stack.md\",\"text\":\"详解栈结构，并实现一个栈结构\"},{\"link\":\"/pages/structure/queue.md\",\"text\":\"详解队列结构，并实现一个队列结构\"},{\"link\":\"/pages/structure/link.md\",\"text\":\"详解链表结构，并实现一个链表结构\"},{\"link\":\"/pages/structure/set.md\",\"text\":\"详解集合结构，并实现一个集合\"},{\"link\":\"/pages/structure/map.md\",\"text\":\"详解字典结构，并实现一个字典\"},{\"link\":\"/pages/structure/tree.md\",\"text\":\"详解树结构，并实现二叉搜索树\"},{\"link\":\"/pages/structure/graph.md\",\"text\":\"详解图结构，并实现一个图结构\"},{\"link\":\"/pages/structure/heap.md\",\"text\":\"详解堆结构，并实现一个最小堆\"}]}],\"/pages/css/layout/\":[{\"text\":\"CSS 布局方式\",\"items\":[{\"link\":\"/pages/css/layout/flex.md\",\"text\":\"一文读懂CSS布局--flex布局\"},{\"link\":\"/pages/css/layout/grid.md\",\"text\":\"一文读懂CSS布局--grid布局\"}]}],\"/pages/tschallenge/\":[{\"text\":\"typescript 类型挑战\",\"items\":[{\"link\":\"/pages/tschallenge/easy.md\",\"text\":\"Easy 题\"},{\"link\":\"/pages/tschallenge/medium.md\",\"text\":\"Medium 题\"},{\"link\":\"/pages/tschallenge/hard.md\",\"text\":\"Hard 题\"}]}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>