(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{479:function(t,s,a){"use strict";a.r(s);var n=a(62),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("为了提升用户的体验感，直接在客户端存储用户信息的需求也随之增加。无论是实现自动登录，个人偏好，换肤功能等，都能使用客户端存储来实现。本文将介绍Web客户端常见的几种存储方式，将结合实际应用场景进行分析，以及相关代码分享")]),t._v(" "),a("p",[a("strong",[t._v("先上图")]),t._v("，本文知识归纳")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ljcimg.oss-cn-beijing.aliyuncs.com/img/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E5%82%A8.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_1-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cookie"}},[t._v("#")]),t._v(" 1. Cookie")]),t._v(" "),a("p",[a("code",[t._v("Cookie")]),t._v(" 是一些数据， 存储于电脑上的文本文件中。在"),a("strong",[t._v("HTML5")]),t._v("到来之前，"),a("code",[t._v("cookie")]),t._v("是主要的存储方式。")]),t._v(" "),a("blockquote",[a("p",[t._v("对于"),a("code",[t._v("cookie")]),t._v("的历史由于学识过浅就不过多讨论 😔")])]),t._v(" "),a("h3",{attrs:{id:"_1-1-cookie的限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-cookie的限制"}},[t._v("#")]),t._v(" 1.1 Cookie的限制")]),t._v(" "),a("p",[t._v("因为"),a("code",[t._v("cookie")]),t._v("存储在客户端的机器中，所以为了保证它不被恶意利用，浏览器会加以限制，只要遵守下列规则就不会有什么问题")]),t._v(" "),a("ul",[a("li",[t._v("不超过300个cookie")]),t._v(" "),a("li",[t._v("每个cookie不超过4096字节，也就是"),a("code",[t._v("4k")])]),t._v(" "),a("li",[t._v("每个域不超过20个cookie")]),t._v(" "),a("li",[t._v("每个域不超过81920字节")])]),t._v(" "),a("p",[t._v("每个域能设置的cookie总数也是受限的，但不同浏览器的限制不同")]),t._v(" "),a("p",[a("code",[t._v("注意")]),t._v("：当cookie总数超过了单个域的上限，浏览器就会删除=="),a("strong",[t._v("之前设置")]),t._v("==的"),a("code",[t._v("cookie")])]),t._v(" "),a("h3",{attrs:{id:"_1-2-cookie的构成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-cookie的构成"}},[t._v("#")]),t._v(" 1.2 cookie的构成")]),t._v(" "),a("p",[a("code",[t._v("cookie")]),t._v("在浏览器中是由以下参数构成的")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("名称")]),t._v("：cookie名不区分大小写，因此"),a("code",[t._v("myCookie")]),t._v("和"),a("code",[t._v("MyCookie")]),t._v("是同一个名称。不过，实践中最好将"),a("code",[t._v("cookie")]),t._v("名当成区分大小写来对待，不仅提高代码的可读性，同时避免一些不必要的误会")]),t._v(" "),a("li",[a("strong",[t._v("值")]),t._v("：存储在"),a("code",[t._v("cookie")]),t._v("里的字符串值")]),t._v(" "),a("li",[a("strong",[t._v("域")]),t._v("：domain表示的是cookie所在的域， 默认cookie的域是=="),a("strong",[t._v("当前域名")]),t._v("==。")]),t._v(" "),a("li",[a("strong",[t._v("路径")]),t._v("：请求"),a("code",[t._v("URL")]),t._v(" 中包含这个路径才会把 "),a("code",[t._v("cookie")]),t._v("发送到服务器，例如：指定cookie路径为"),a("code",[t._v("http://www.baidu.com/my/ljc")]),t._v(" 则"),a("code",[t._v("http://www.baidu.com/my/")]),t._v("下的页面就不会发送"),a("code",[t._v("cookie")])]),t._v(" "),a("li",[a("strong",[t._v("过期时间")]),t._v("：表示什么时间删除"),a("code",[t._v("cookie")]),t._v("，即不再发送到服务器。默认情况下浏览器=="),a("strong",[t._v("会话结束后")]),t._v("==会删除所有cookie。不过，可以设置删除"),a("code",[t._v("cookie")]),t._v("的具体时间，这样即使关闭浏览器"),a("code",[t._v("cookie")]),t._v("也会保存在用户的本机上。把过期时间设置为过去的时间就可以实现删除"),a("code",[t._v("cookie")])]),t._v(" "),a("li",[a("strong",[t._v("安全标志")]),t._v("：只在使用SSL安全连接的情况下才会把"),a("code",[t._v("cookie")]),t._v("发送到服务器。例如，https请求就能发送"),a("code",[t._v("ccokie")]),t._v("，而http请求则不会，添加"),a("code",[t._v("secure")]),t._v("字样即可开启")])]),t._v(" "),a("p",[t._v("这些参数在使用中使用=="),a("strong",[t._v("分号隔开")]),t._v("==")]),t._v(" "),a("h3",{attrs:{id:"_1-3-javascript中cookie的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-javascript中cookie的使用"}},[t._v("#")]),t._v(" 1.3 JavaScript中cookie的使用")]),t._v(" "),a("p",[t._v("这里将结合=="),a("strong",[t._v("自动登录")]),t._v("==功能来谈论，将经过4个步骤，设置"),a("code",[t._v("cookie")]),t._v("，获取"),a("code",[t._v("cookie")]),t._v("，移除"),a("code",[t._v("cookie")]),t._v("，以及初始化操作")]),t._v(" "),a("h4",{attrs:{id:"_1-3-1-设置cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-设置cookie"}},[t._v("#")]),t._v(" 1.3.1 设置cookie")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'username='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" valId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';path=/;expires='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGMTString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用户名")]),t._v("\n\tdocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'psd='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" valPsd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';path=/;expires='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" \tdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGMTString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//密码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("在上面的代码中，设置了名为"),a("code",[t._v("username")]),t._v("和"),a("code",[t._v("psd")]),t._v("的cookie，设置了"),a("code",[t._v("path")]),t._v("在任何路径下可以访问，过期时间为30天，")]),t._v(" "),a("p",[a("code",[t._v("注意")]),t._v("：这里会有"),a("strong",[t._v("8小时的误差")]),t._v("，原因是浏览器时间为当前所在地区的时间，而代码中通过"),a("code",[t._v("toGMTString")]),t._v("转化后的时间是==格林威治时间==，北京处于东八区，所以时间会早8小时，如果化为准确的30天的话，加8小时即可~")]),t._v(" "),a("p",[a("code",[t._v("注意")]),t._v("：在保存账号密码时可以进行==加密处理==")]),t._v(" "),a("h4",{attrs:{id:"_1-3-2-移除cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-移除cookie"}},[t._v("#")]),t._v(" 1.3.2 移除cookie")]),t._v(" "),a("p",[t._v("在前面也有说到，当当前时间超过了cookie的过期时间，cookie就会自动的被清除，我们就利用这个特性来实现移除cookie的功能")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeCookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//过去的时间")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'username=path=/;expires='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGMTString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'psd=;path=/;expires='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGMTString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("在上面的代码中，重点留意第三行，通过重新设置时间戳，使得过期时间为过去的时间，这样cookie就自动的被清除了。")]),t._v(" "),a("p",[a("code",[t._v("注意")]),t._v("：当我们在设置同名的cookie时，会覆盖先前的cookie，从而实现了移除cookie的功能")]),t._v(" "),a("h4",{attrs:{id:"_1-3-3-获取cookie值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-3-获取cookie值"}},[t._v("#")]),t._v(" 1.3.3 获取cookie值")]),t._v(" "),a("p",[t._v("获取cookie的操作比较复杂，JavaScript中没有太多的API给我们去操作cookie，只有BOM中的"),a("code",[t._v("document.cookie")]),t._v("属性。相信都不会陌生吧，当它作为"),a("code",[t._v("键")]),t._v("存在时可以用于设置cookie。当作为"),a("code",[t._v("值")]),t._v("被调用时，可以返回当前地址下的所有cookie，为=="),a("strong",[t._v("字符串")]),t._v("==类型")]),t._v(" "),a("p",[a("code",[t._v("注意")]),t._v("：存在多个cookie一起返回时，用"),a("code",[t._v(";")]),t._v(" 隔开。"),a("code",[t._v("name1=value1;name2=value2")]),t._v("，因此获取cookie值要经历以下几步")]),t._v(" "),a("ol",[a("li",[t._v("利用字符串中"),a("code",[t._v("split")]),t._v("方法，将返回的字符串通过"),a("code",[t._v(";")]),t._v("标识符进行分割返回数组")]),t._v(" "),a("li",[t._v("再通过遍历分割好的cookie数组，逐一判断需要获取的cookie名，最后再通过处理数组值从而得到cookie值。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cookieName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cookieName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cookieList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" cookieList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cookieItem "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cookieList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//去除空格")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cookieItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cookieName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cookieItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cookieName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cookieItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("在代码中出现了很多数组，字符串的API，下面我们来一个个分析以下")]),t._v(" "),a("ul",[a("li",[t._v("在第4行中，字符串API"),a("code",[t._v("split")]),t._v("，这个方法的作用是，通过特定的标识符对字符串进行分割，返回分割好的数组，例如：")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"How=are;you=doing"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('";"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ["How=are", "you=doing"]')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("在第5行中使用到了"),a("code",[t._v("trim")]),t._v("方法，用于==去除首尾==的空格，避免空格对后面处理值造成影响")]),t._v(" "),a("li",[t._v("在第6行中使用到了字符串方法"),a("code",[t._v("indexOf")]),t._v("，用于查找字符串中是否存在我们需要的获取的cookie名，找得到返回值就为首次出现的索引，否则为"),a("code",[t._v("-1")])])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("inedxOf")]),t._v("方法可返回某个指定的字符串值在字符串中首次出现的位置。如果没有找到匹配的字符串则返回 -1。")])]),t._v(" "),a("ul",[a("li",[t._v("在第7行中使用了字符串的方法"),a("code",[t._v("substring")]),t._v("，改方法用于==切割字符串==，要传入两个参数，切割的初始位置和末位置")])]),t._v(" "),a("h4",{attrs:{id:"_1-3-4-初始化操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-4-初始化操作"}},[t._v("#")]),t._v(" 1.3.4 初始化操作")]),t._v(" "),a("p",[t._v("有了前面的铺垫，这里就比较轻松了，我们只需要判断以下当前地址下的cookie中是否存在，用户名和密码，如果存在，我们就为他们进行自动登录，这一步一般放在代码的最前面，用户打开页面就先判断")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'username'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'psd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//需要进行的操作")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("code",[t._v("注意")]),t._v("：这里可能有人会有疑问，只要有用户名密码就好了吗？")]),t._v(" "),a("ul",[a("li",[t._v("我的答案是：是的，因为我们可以在用户登录的时候，只有用户成功登录了，我们才会为它设置cookie，所以，不用担心密码错误的问题。")])]),t._v(" "),a("p",[t._v("以上就是JavaScript中操作利用"),a("code",[t._v("cookie")]),t._v("实现自动登录的实现过程，"),a("strong",[t._v("设置，获取，移除")])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("对cookie的限制及特性决定了cookie并不是存储==大量数据==的理想方式。因此，其他客户端技术出现了")]),t._v(" "),a("p",[a("code",[t._v("注意")]),t._v("：不要在cookie中存储重要或敏感信息，cookie的数据保存并不是在安全的地方。")]),t._v(" "),a("h2",{attrs:{id:"_2-web-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-web-storage"}},[t._v("#")]),t._v(" 2. Web Storage")]),t._v(" "),a("p",[t._v("在"),a("strong",[t._v("HTML5")]),t._v("中引进了两种存储方式"),a("code",[t._v("sessionStorage")]),t._v("和"),a("code",[t._v("localStorage")]),t._v("。"),a("code",[t._v("web Storage")]),t._v("的目的解决通过客户端存储不需要频繁发送回服务器的数据时使用"),a("code",[t._v("cookie")]),t._v("的问题。")]),t._v(" "),a("p",[a("code",[t._v("localStorage")]),t._v("和"),a("code",[t._v("sessionStorage")]),t._v("存储在用户本地的浏览器上，不像cookie一样携带在http请求头部的字段中，有效的避免了性能问题。"),a("code",[t._v("localStorge")]),t._v("同样也采用了同源策略对存储的容量进行了限制，大多数设置限制为同一域名"),a("strong",[t._v("5M")]),t._v("的存储空间。")]),t._v(" "),a("blockquote",[a("p",[t._v("这里重点讲本地存储，临时存储的方法相同")])]),t._v(" "),a("p",[a("code",[t._v("注意")]),t._v("：两种方式存储的值都只能是=="),a("strong",[t._v("字符串")]),t._v("==的形式")]),t._v(" "),a("h3",{attrs:{id:"_2-1-localstorage对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-localstorage对象"}},[t._v("#")]),t._v(" 2.1 localStorage对象")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("localStorage")]),t._v("：没有时间限制，持续范围超过当前会话，浏览器关闭再打开数据依然是可用的（注意是同一域名下）")])]),t._v(" "),a("p",[a("code",[t._v("localstorage")]),t._v("的存储方式是以=="),a("code",[t._v("key-value")]),t._v("==的形式进行存储的，首先我们先了解以下其中的操作方法")]),t._v(" "),a("ol",[a("li",[a("p",[a("code",[t._v("localstorage.length")]),t._v("：获取当前存储中的键值对数量")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("localstorage.key(index)")]),t._v("：得到某个索引的键值")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("localstorage.getItem(key)")]),t._v("：读取对应键值的数据")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("localstorage.setItem(key,value)")]),t._v("：设置对应的键值对，保存数据")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("localstorage.remove(key)")]),t._v("：清除某个指定数据")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("localstorage.clear()")]),t._v("：清除存储的所有数据")])])]),t._v(" "),a("h4",{attrs:{id:"_2-1-1-小demo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-小demo"}},[t._v("#")]),t._v(" 2.1.1 小demo")]),t._v(" "),a("p",[t._v("接下来先实现一个简单的保存查找功能，有以下")]),t._v(" "),a("ul",[a("li",[t._v("保存用户的名称，以及拥有的金钱数量")]),t._v(" "),a("li",[t._v("通过用户名查询到对应的金钱数量")])]),t._v(" "),a("p",[a("strong",[t._v("代码实现")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" myName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#myName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取需要保存的用户名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" money "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#money'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//金钱数量")]),t._v("\n    localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//保存")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("首先当我们需要进行保存数据时，我们会调用set函数，通过获取当前的需要保存的数据，直接进行保存")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" searchName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#searchName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" youMoney "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("searchName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" findEnd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#findEnd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//页面上的渲染位置")]),t._v("\n    findEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" youMoney"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("当我们需要获取用户的金钱数时，我们调用find方法，先确定需要获取的人是谁，再通过"),a("code",[t._v("getItem")]),t._v("方法获取本地存储中的键值，再渲染到页面上。")]),t._v(" "),a("p",[t._v("这样我们就实现了一个简单的本地存储，如果需要进行其他的操作，像删除本地存储这些，这里示例删除数据")]),t._v(" "),a("p",[a("strong",[t._v("删除指定数据")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//delete localStorage.myName;")]),t._v("\nlocalStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("有两种方法能够实现删除的操作，使用"),a("code",[t._v("delete")]),t._v(" 和"),a("code",[t._v("removeItem")]),t._v("删除指定的数据")]),t._v(" "),a("p",[t._v("其他的就不过多赘述了，方法一样。")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("从上面的操作中我们会发现我们需要新建过多的存储信息，每一个用户信息都我们要为他们新创建一个本地存储，更多情况下我们存储的数据会更复杂，这样的方法就会变的更加的麻烦")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ljcimg.oss-cn-beijing.aliyuncs.com/img/local.png",alt:"local"}})]),t._v(" "),a("p",[a("strong",[t._v("就像图片中的这样")]),t._v("，这样的方式并不是友好的，因此我们需要优化它。")]),t._v(" "),a("h4",{attrs:{id:"_2-1-2-对象存储方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-对象存储方式"}},[t._v("#")]),t._v(" 2.1.2 对象存储方式")]),t._v(" "),a("p",[t._v("在需要对单个用户的大量信息进行存储时，我们可以采用==对象存储方式==进行存储，将一个用户的姓名，年龄，性别等信息，存入对象中再保存")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("username")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ljc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'20'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sickName")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'小猴'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sex")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'男'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nuser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlocalStorage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("由于==只能==存储字符串类型的数据，我们采用"),a("code",[t._v("JSON.stringify")]),t._v("方法将对象转化为字符串，存储结果的value为：")]),t._v(" "),a("p",[a("code",[t._v('{"username":"ljc","age":"20","sickName":"小猴","sex":"男"}')])]),t._v(" "),a("p",[t._v("这样我们就实现了我们想要的操作。")]),t._v(" "),a("ul",[a("li",[t._v("当我们需要存储更多的用户数据时，而不单单是一个用户数据时，我们可以继续在上面的代码中优化，我们可以将用户数据存放于数组中，在使用"),a("code",[t._v("JSON.stringify")]),t._v("将数组转化为字符串，从而实现，在上面代码的基础上进行修改")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" userArr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nuserArr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \nuserArr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userArr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("下面我们来看看储存结果")]),t._v(" "),a("p",[a("code",[t._v('[{"username":"ljc","age":"20","sickName":"小猴","sex":"男"}]')])]),t._v(" "),a("p",[t._v("可以看到现在的value中存放的是一个数组，我们可以==通过push方法==继续的追加用户信息，从而实现了想要的优化")]),t._v(" "),a("p",[t._v("在我们获取本地存储的数据时，需要将获取数据经过"),a("code",[t._v("JSON.parse")]),t._v("==转化为对象==再使用")]),t._v(" "),a("h3",{attrs:{id:"_2-2-sessionstorage对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-sessionstorage对象"}},[t._v("#")]),t._v(" 2.2 sessionStorage对象")]),t._v(" "),a("p",[t._v("又叫临时存储，顾名思义只是暂时存储，在浏览器会话窗口关闭后，会全部清除")]),t._v(" "),a("blockquote",[a("p",[t._v("操作方法和"),a("code",[t._v("localStorage")]),t._v("完全一致，就不过多阐述")])]),t._v(" "),a("h2",{attrs:{id:"_3-几者的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-几者的区别"}},[t._v("#")]),t._v(" 3.几者的区别")]),t._v(" "),a("ol",[a("li",[t._v("cookie在每次请求时都会被发送到服务器，这样会浪费带宽")]),t._v(" "),a("li",[t._v("cookie中的操作方法需要自己封装，web storage中有"),a("code",[t._v("setItem")]),t._v("，"),a("code",[t._v("getItem")]),t._v("等方法")]),t._v(" "),a("li",[t._v("cookie能够与服务器端交互，web Storage只是将数据保存在本地")]),t._v(" "),a("li",[t._v("存储数据的大小限制不一样，"),a("code",[t._v("cookie")]),t._v("一般4k，"),a("code",[t._v("web Storage")]),t._v("一般5M")]),t._v(" "),a("li",[t._v("数据的生命周期不一致，cookie能设置时间，本地存储是永久性的，临时存储可以说是一次性的")]),t._v(" "),a("li",[t._v("作用域不同，"),a("code",[t._v("sessionStorage")]),t._v("不在不同的浏览器窗口中共享，"),a("code",[t._v("localstorage")]),t._v("和"),a("code",[t._v("cookie")]),t._v("在所有同源窗口中都是共享的；")])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("以上就是关于客户端存储的几种常用方式的归纳，希望看完的你能有所收获~")]),t._v(" "),a("blockquote",[a("p",[t._v("参考文献：JavaScript高级程序设计（第4版）")])])])}),[],!1,null,null,null);s.default=e.exports}}]);